var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function __(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();!function(){return function r(e,t,i){function o(a,s){if(!t[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=t[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,r,e,t,i)}return t[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}}()({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./view/bigItem"),a=function(){function GameConfig(){}return GameConfig.init=function(){(0,Laya.ClassUtils.regClass)("view/bigItem.ts",n.default)},GameConfig.width=1100,GameConfig.height=700,GameConfig.scaleMode="fixedwidth",GameConfig.screenMode="none",GameConfig.alignV="top",GameConfig.alignH="left",GameConfig.startScene="test/Big.scene",GameConfig.sceneRoot="",GameConfig.debug=!1,GameConfig.stat=!1,GameConfig.physicsDebug=!1,GameConfig.exportSceneToJson=!0,GameConfig}();i.default=a,a.init()},{"./view/bigItem":5}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./GameConfig"),a=e("./view/BigRank");new(function(){function Main(){Laya.isWXOpenDataContext=!0,Laya.isWXPosMsg=!0,Laya.init(n.default.width,n.default.height,!1),Laya.stage.scaleMode=n.default.scaleMode,Laya.stage.screenMode=n.default.screenMode,Laya.stage.alignV=n.default.alignV,Laya.stage.alignH=n.default.alignH,Laya.Browser.onMiniGame?wx.onMessage(function(e){"res/atlas/common.atlas"==e.url&&Laya.loader.load("res/atlas/common.atlas",Laya.Handler.create(this,this.onComplete))}.bind(this)):Laya.loader.load("res/atlas/common.atlas",Laya.Handler.create(this,this.onComplete))}return Main.prototype.onComplete=function(){(new a.default).init()},Main}())},{"./GameConfig":1,"./view/BigRank":4}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=Laya.ClassUtils.regClass;!function(e){!function(e){var t=function(e){function BigUI(){return e.call(this)||this}return __extends(BigUI,e),BigUI.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(BigUI.uiView)},BigUI.uiView={type:"Scene",props:{width:1100,height:700},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:1100,texture:"common/Paper.png",height:700},compId:7},{type:"List",props:{y:50,x:50,width:1e3,var:"_list",selectEnable:!1,repeatY:4,repeatX:1,height:592,elasticEnabled:!1},compId:3,child:[{type:"bigItem",props:{y:0,x:10,runtime:"view/bigItem.ts",renderType:"render"},compId:5}]},{type:"Button",props:{y:306,x:80,var:"_left",stateNum:1,skin:"common/ArrowRight.png",skewX:0,scaleX:-1,rotation:0},compId:8},{type:"Button",props:{y:306,x:1020,var:"_right",stateNum:1,skin:"common/ArrowRight.png"},compId:9}],loadList:["common/Paper.png","common/ArrowRight.png"],loadList3D:[]},BigUI}(Laya.Scene);e.BigUI=t,n("ui.test.BigUI",t);var i=function(e){function BigItemUI(){return e.call(this)||this}return __extends(BigItemUI,e),BigItemUI.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(BigItemUI.uiView)},BigItemUI.uiView={type:"View",props:{width:980,height:150},compId:2,child:[{type:"Image",props:{y:20,x:145,width:110,var:"img_head",skin:"common/cube.png",height:110},compId:3,child:[{type:"Sprite",props:{y:0,x:0,width:110,texture:"common/c1.png",renderType:"mask",height:110},compId:10}]},{type:"Label",props:{y:0,x:0,width:132,var:"text_number",valign:"middle",text:"#99",height:150,fontSize:50,color:"#4e2623",bold:!0,align:"center"},compId:11},{type:"Label",props:{y:0,x:298,width:392,var:"text_name",valign:"middle",text:"名字",overflow:"scroll",height:150,fontSize:40,color:"#4e2623",bold:!0,align:"left"},compId:4},{type:"Label",props:{y:0,x:722,width:258,var:"text_score",valign:"middle",text:"123.456",height:150,fontSize:50,color:"#08bf76",bold:!0,align:"center"},compId:5}],loadList:["common/cube.png","common/c1.png"],loadList3D:[]},BigItemUI}(Laya.View);e.BigItemUI=i,n("ui.test.BigItemUI",i)}(e.test||(e.test={}))}(i.ui||(i.ui={}))},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function BigRank(){var t=e.call(this)||this;return t._key="airplaneScore",t._curPage=0,t._friendArr=[],t.curArr=[],t}return __extends(BigRank,e),BigRank.prototype.init=function(){Laya.stage.addChild(this),Laya.Browser.onMiniGame&&wx.onMessage(this.recevieData.bind(this)),this.setlist([]),this.SetInfo(),this._left.clickHandler=new Laya.Handler(this,this.onLeftBtnClick),this._right.clickHandler=new Laya.Handler(this,this.onRightBtnClick)},BigRank.prototype.onLeftBtnClick=function(){--this._curPage,this.SetInfo()},BigRank.prototype.onRightBtnClick=function(){++this._curPage,this.SetInfo()},BigRank.prototype.SetInfo=function(){this.curArr=[];for(var e=0;e<4&&!(this._friendArr.length<4*this._curPage+e+1);++e)this.curArr[e]=this._friendArr[4*this._curPage+e];this.setlist(this.curArr),this._left.visible=!1,this._right.visible=!1,this._curPage>0&&(this._left.visible=!0),this._curPage<this._friendArr.length/4-1&&(this._right.visible=!0)},BigRank.prototype.getFriendData=function(){var e=this;wx.getFriendCloudStorage({keyList:[this._key],success:function(t){var i,n,a,r=[];if(console.log("-----------------getFriendCloudStorage------------"),t.data){for(var o=0;o<t.data.length;o++)(n=t.data[o]).KVDataList.length&&(a=n.KVDataList[0]).key==e._key&&(a=JSON.parse(a.value),(i={}).avatarIP=n.avatarUrl,i.UserName=n.nickname,i.openID=n.openid,i.RankValue=a.wxgame.score,i.update_time=a.wxgame.update_time,r.push(i));r=r.sort(function(e,t){return t.RankValue-e.RankValue});for(o=0;o<r.length;o++)r[o].index=o+1;e._friendArr=r,e._curPage=0,e.SetInfo()}},fail:function(e){console.log("------------------获取托管数据失败--------------------"),console.log(e)}})},BigRank.prototype.recevieData=function(e){switch(e.type){case"RankOpen":this.visible=!0,this._left.visible=!1,this._right.visible=!1,this.getFriendData();break;case"RankClose":this.visible=!1}},BigRank.prototype.setlist=function(e){this._list.array=e,this._list.refresh()},BigRank}(e("../ui/layaMaxUI").ui.test.BigUI);i.default=n},{"../ui/layaMaxUI":3}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function BigItem(){return e.call(this)||this}return __extends(BigItem,e),Object.defineProperty(BigItem.prototype,"dataSource",{set:function(e){e&&(this.text_number.text="#"+e.index,this.img_head.skin=e.avatarIP,this.text_name.text=e.UserName,this.text_score.text=e.RankValue)},enumerable:!0,configurable:!0}),BigItem}(e("../ui/layaMaxUI").ui.test.BigItemUI);i.default=n},{"../ui/layaMaxUI":3}]},{},[2]);